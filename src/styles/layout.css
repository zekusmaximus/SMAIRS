/* Root layout grid */
.main-grid {
  --bar-h: 56px;
  --left-w: 250px;
  --right-w: 350px;
  --gap: 8px;
  display: grid;
  grid-template-areas:
    "bar bar bar"
    "left center right";
  grid-template-columns: var(--left-w) 1fr var(--right-w);
  grid-template-rows: var(--bar-h) 1fr;
  height: 100dvh;
}

.decision-bar {
  grid-area: bar;
  position: sticky;
  top: 0;
  z-index: 10;
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  align-items: center;
  gap: var(--gap);
  padding: 8px 12px;
  border-bottom: 1px solid #374151;
  background: #1f2937;
  backdrop-filter: blur(6px);
  min-height: var(--bar-h);
  color: #e5e7eb;
}
.decision-bar .left,
.decision-bar .center,
.decision-bar .right { display: flex; align-items: center; gap: 8px; }
.decision-bar .left .app-title { font-size: 16px; margin: 0 8px 0 0; }
.decision-bar .btn { padding: 6px 10px; border: 1px solid #6b7280; background: #374151; border-radius: 6px; cursor: pointer; color: #e5e7eb; }
.decision-bar .btn.primary { background: #2563eb; border-color: #2563eb; color: white; }
.decision-bar .btn:disabled { opacity: 0.5; cursor: default; }
.decision-bar .btn:hover:not(:disabled) { background: #4b5563; }

.panel-left { grid-area: left; border-right: 1px solid #374151; overflow: auto; background: #111827; }
.panel-center { grid-area: center; overflow: auto; background: #111827; }

/* Ensure editor containers have proper height */
.panel-center .panel-body {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.panel-center .panel-body > div {
  flex: 1;
  min-height: 0;
}
.panel-right { grid-area: right; border-left: 1px solid #374151; overflow: auto; background: #111827; }

.panel-title { padding: 8px 12px; font-weight: 600; border-bottom: 1px solid #374151; background: #1f2937; position: sticky; top: 0; z-index: 1; color: #e5e7eb; }
.panel-body { padding: 12px; }
.placeholder { color: #777; font-size: 14px; }

/* Preflight pill */
.pill { display: inline-flex; align-items: center; gap: 6px; padding: 4px 8px; border-radius: 999px; font-size: 12px; border: 1px solid transparent; }
.pill.pass { background: #065f46; color: #d1fae5; border-color: #10b981; }
.pill.fail { background: #7f1d1d; color: #fecaca; border-color: #ef4444; }
.pill.pending { background: #374151; color: #d1d5db; border-color: #6b7280; }
.pill-symbol { font-weight: 700; }

/* Version selector */
.version-selector { display: inline-flex; align-items: center; gap: 8px; }
.version-selector select { padding: 4px 6px; }
.version-selector .btn.promote { padding: 4px 8px; }

/* Compare drawer */
.compare-drawer {
  position: fixed;
  left: 0; right: 0; bottom: 0;
  transform: translateY(100%);
  transition: transform 160ms ease-in-out;
  background: #fff;
  border-top: 1px solid #e5e7eb;
  box-shadow: 0 -8px 24px rgba(0,0,0,0.06);
}
.compare-drawer.open { transform: translateY(0); }
.compare-content { padding: 12px; max-width: 1200px; margin: 0 auto; }

/* Responsive: stack panels on small screens */
@media (max-width: 900px) {
  .main-grid {
    grid-template-areas:
      "bar"
      "left"
      "center"
      "right";
    grid-template-columns: 1fr;
    grid-template-rows: var(--bar-h) auto auto 1fr;
  }
  .panel-left, .panel-center, .panel-right { border: none; }
}
